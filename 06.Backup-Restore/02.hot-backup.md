## Hot Backup:

A hot backup (also called an inconsistent backup) is taken while the database is open and running.  

A Hot Backup in Oracle databases, also known as an online backup, is a physical backup performed while the database is running in ARCHIVELOG mode. It allows the database to remain available for users during the backup process, capturing data files, control files, and archived redo logs. Since the database is active, the backup may initially be inconsistent, requiring recovery to make it consistent during restoration.


### Hot Backup Process:


#### 1. Enable ARCHIVELOG Mode:

```
archive log list;


Database log mode              No Archive Mode
Automatic archival             Disabled
Archive destination            /u01/app/oracle/product/19.0.0/dbhome_1/dbs/arch
Oldest online log sequence     6
Current log sequence           8
```


```
SHUTDOWN IMMEDIATE;

STARTUP MOUNT;

ALTER DATABASE ARCHIVELOG;

ALTER DATABASE OPEN;
```


```
SELECT log_mode FROM v$database;

LOG_MODE
------------
ARCHIVELOG
```



```
SHOW PARAMETER log_archive_dest;
```




#### 2. Identify Database Files: 


```
select name from v$database;

NAME
---------
ORCL
```


```
SELECT name FROM v$datafile;

NAME
-----------------------------------------------
/u01/app/oracle/oradata/ORCL/system01.dbf
/u01/app/oracle/oradata/ORCL/sysaux01.dbf
/u01/app/oracle/oradata/ORCL/undotbs01.dbf
/u01/app/oracle/oradata/ORCL/users01.dbf
```


```
col tablespace_name for a20
col file_name for a50

SELECT tablespace_name, file_name FROM dba_data_files;


TABLESPACE_NAME      FILE_NAME
-------------------- --------------------------------------------------
SYSTEM               /u01/app/oracle/oradata/ORCL/system01.dbf
SYSAUX               /u01/app/oracle/oradata/ORCL/sysaux01.dbf
USERS                /u01/app/oracle/oradata/ORCL/users01.dbf
UNDOTBS1             /u01/app/oracle/oradata/ORCL/undotbs01.dbf
```


```
SELECT tablespace_name, file_name FROM dba_temp_files;

TABLESPACE_NAME      FILE_NAME
-------------------- --------------------------------------------------
TEMP                 /u01/app/oracle/oradata/ORCL/temp01.dbf
```


```
SELECT member FROM v$logfile;

MEMBER
-------------------------------------------
/u01/app/oracle/oradata/ORCL/redo03.log
/u01/app/oracle/oradata/ORCL/redo02.log
/u01/app/oracle/oradata/ORCL/redo01.log
```



```
SELECT name FROM v$controlfile;

NAME
------------------------------------------------
/u01/app/oracle/oradata/ORCL/control01.ctl
/u01/app/oracle/oradata/ORCL/control02.ctl
```




```
show parameter spfile;

NAME          TYPE        VALUE
------------- ----------- -------------------------------------------------------------
spfile        string      /u01/app/oracle/product/19.0.0/dbhome_1/dbs/spfileorcl.ora
```





#### 3. Put Tablespaces into Backup Mode:

```
select file#, status from v$backup;

     FILE# STATUS
---------- ------------------
         1 ACTIVE
         3 ACTIVE
         4 ACTIVE
         7 ACTIVE
```



_For each tablespace, enable backup mode to ensure consistent data file copies:_
```
ALTER TABLESPACE users BEGIN BACKUP;
ALTER TABLESPACE SYSTEM BEGIN BACKUP;
ALTER TABLESPACE SYSAUX BEGIN BACKUP;
ALTER TABLESPACE UNDO BEGIN BACKUP;
```


Or,

_Alternatively, used for all tablespaces:_
```
ALTER DATABASE BEGIN BACKUP;
```



#### 4. Copy Datafiles (OS command):

```
mkdir -p /home/oracle/backup/hot-backup
mkdir -p /home/oracle/backup/hot-backup/archivelog/
```


```
cp /u01/app/oracle/oradata/ORCL/users01.dbf /home/oracle/backup/hot-backup

cp /u01/app/oracle/oradata/ORCL/system01.dbf /home/oracle/backup/hot-backup
cp /u01/app/oracle/oradata/ORCL/sysaux01.dbf /home/oracle/backup/hot-backup
cp /u01/app/oracle/oradata/ORCL/undotbs01.dbf /home/oracle/backup/hot-backup
```




#### 5. End Backup Mode:

_Take each tablespace out of backup mode:_
```
ALTER TABLESPACE users END BACKUP;
```


_For all tablespaces:_
```
ALTER DATABASE END BACKUP;
```


#### 6. Backup Control Files:

_Backup of the control file:_
```
ALTER DATABASE BACKUP CONTROLFILE TO '/home/oracle/backup/hot-backup/control01.ctl';
```



_Optionally, create a text-based trace file for rebuilding the control file:_
```
ALTER DATABASE BACKUP CONTROLFILE TO TRACE AS '/home/oracle/backup/hot-backup/controlfile.trc';
```



#### 7. Backup Archived Logs

```
alter system switch logfile;
```


```
select GROUP#, SEQUENCE#, STATUS from v$log;

    GROUP#  SEQUENCE# STATUS
---------- ---------- --------------------
         1         13 INACTIVE
         2         14 ACTIVE
         3         15 CURRENT
```


_Force a log switch to archive the current redo log:_
```
ALTER SYSTEM ARCHIVE LOG CURRENT;
```



```
select THREAD#, SEQUENCE#, STATUS, NAME from v$archived_log;

   THREAD#  SEQUENCE# STATUS                NAME
---------- ---------- --------------------  --------------------------------------------------------------------------------
         1         11 A                     /u01/app/oracle/product/19.0.0/dbhome_1/dbs/arch1_11_1210173693.dbf
         1         12 A                     /u01/app/oracle/product/19.0.0/dbhome_1/dbs/arch1_12_1210173693.dbf
         1         13 A                     /u01/app/oracle/product/19.0.0/dbhome_1/dbs/arch1_13_1210173693.dbf
         1         14 A                     /u01/app/oracle/product/19.0.0/dbhome_1/dbs/arch1_14_1210173693.dbf
         1         15 A                     /u01/app/oracle/product/19.0.0/dbhome_1/dbs/arch1_15_1210173693.dbf
```



_Copy archived redo logs to the backup location:_
```
cp /u01/app/oracle/archivelog/* /home/oracle/backup/hot-backup/archivelog/

Or,

cp /u01/app/oracle/product/19.0.0/dbhome_1/dbs/arch1* /home/oracle/backup/hot-backup/archivelog
```


#### 8. Backup Parameter and Password Files:

_Copy the `spfile` or `init.ora` and password file:_
```
cp /u01/app/oracle/product/19.0.0/dbhome_1/dbs/spfileorcl.ora /home/oracle/backup/hot-backup

cp /u01/app/oracle/product/19.0.0/dbhome_1/dbs/orapworcl /home/oracle/backup/hot-backup
```


#### 9. Verify Backup: (OS command)

_Use `dbv` (DBVERIFY) to check data file integrity:_
```
dbv file=/home/oracle/backup/hot-backup/users01.dbf
```



---
---




### Restore & Recovery Process (Hot Backup):


#### 1. Shutdown DB if running:

```
SHUTDOWN IMMEDIATE;
```


#### 2. Restore datafiles from backup:

```
cp /home/oracle/backup/hot-backup/users01.dbf /u01/app/oracle/oradata/ORCL/
```


Or,

_Restore all datafiles:_
```
cp /home/oracle/backup/hot-backup/*.dbf /u01/app/oracle/oradata/ORCL/
```


#### 3. Restore Control Files:

```
cp /home/oracle/backup/hot-backup/*.ctl /u01/app/oracle/oradata/ORCL/
```


#### 4. Mount the Database:

```
STARTUP MOUNT;
```


#### 5. Restore Archived Redo Logs:

_Copy archived redo logs to the archive log destination:_
```
cp /home/oracle/backup/hot-backup/archivelog/*.arc /u01/app/oracle/archivelog/*
```


#### 6. Recover the database:

_Apply archived redo logs to make the database consistent:_
```
RECOVER DATABASE;
```



#### 7. Open the Database:

```
ALTER DATABASE OPEN;
```



